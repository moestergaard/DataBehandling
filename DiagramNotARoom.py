import numpy as np
import matplotlib.pyplot as plt
from matplotlib.lines import Line2D


def plot_confidence_intervals(data_sets, labels, title):
    fig, ax = plt.subplots()
    x = np.arange(len(data_sets[0]))
    width = 0.15

    confidence_level = 0.95
    z_score = {2: 4.303, 3: 3.182, 4: 2.776, 5: 2.571, 6: 2.447, 7: 2.365, 8: 2.306, 9: 2.262, 10: 2.228, 11: 2.201, 12: 2.179, 13: 2.160, 14: 2.145, 15: 2.131, 16: 2.120, 17: 2.567, 47: 2.014, 48: 2.014, 49: 2.014, 50: 2.009}
    
    # colors = ['blue', 'orange', 'green', 'red', 'purple', 'brown', 'teal']
    # colors = ['red', 'green', 'blue', 'orange', 'purple', 'teal', 'brown']
    # colors = ['blue', 'orange', 'green', 'red', 'purple', 'pink', 'gray']
    # colors = ['red', 'green', 'blue', 'orange', 'magenta', 'brown', 'gray']
    # colors = ['red', 'green', 'blue', 'orange', 'purple', 'brown', 'darkgray']
    # colors = ["#B7F0B1", "#2EBD4F", "#B4E1E7", "#2471A3", "#BDADEA", "#6A5ACD", "#FFC0CB"]
    colors = ["#ADD8E6", "#FF69B4", "#A9A9A9"]


    for j, data_set in enumerate(data_sets):
        for i, data in enumerate(data_set):
            mean = np.mean(data)
            std = np.sqrt(np.sum((data-mean)**2)/(len(data)-1))
            margin_of_error = z_score[len(data)-1] * (std / np.sqrt(len(data)))
            lower_bound = mean - margin_of_error
            upper_bound = mean + margin_of_error

            # Plot data points
            ax.plot(x[i]+j*width, mean, marker='o', color=colors[j], label=labels[j] if i == 0 else "")

            # Plot error bars
            ax.errorbar(x[i]+j*width, mean, yerr=margin_of_error, fmt='none', ecolor=colors[j], capsize=3)

    # Set axis labels and title
    ax.set_xticks(x+width)
    # ax.set_xticklabels(['Formiddag: Eget dataset', 'Aften: Eget dataset', 'Formiddag: Anden dag', 'Formiddag: Andet tidspunkt', 'Aften: Anden dag', 'Aften: Andet tidspunkt'], rotation=45)
    # ax.set_xticklabels(['45 minutter', 'Formiddag: Andet tidspunkt', 'Aften: Anden dag', 'Aften: Andet tidspunkt'], rotation=45)
    ax.set_xticklabels(['45 minutter', '30 minutter', '15 minutter', '10 minutter', '5 minutter'], rotation=45)
    fig.subplots_adjust(bottom=0.35)
    fig.subplots_adjust(right=0.8)
    # ax.set_xlabel('Data set')
    ax.set_ylabel('NÃ¸jagtighed')
    ax.set_title(title)

    # Add legend
    handles = [Line2D([0], [0], color=color, linewidth=2) for color in colors]
    ax.legend(handles=handles, labels=labels, loc='center left', bbox_to_anchor=(1, 0.5))

    # Show plot
    plt.show()


""" NN3-B """
dataNN3B = [[1.0, 1.0, 1.0, 0.0, 0.0, 1.0, 0.0], [0.20042949176807445, 0.20992092020129402, 0.8880171184022825, 0.18808327351040918, 0.16357142857142856, 0.2503586800573888, 0.9151817533856023], [0.18894256575415996, 0.31189189189189187, 0.7837693539775761, 0.27130528586839264, 0.2430406852248394, 0.7926763597199784, 0.35146666666666665], [0.6541129831516352, 0.3344982526210684, 0.2704433497536946, 0.2820129546586946, 0.23863636363636365, 0.3112879164594729, 0.7701771653543307], [0.6189599631845375, 0.7411873840445269, 0.23914037494284407, 0.3044886626561777, 0.673394495412844, 0.3145496535796767, 0.327089995431704]]

# """ NN3-B-P """
# dataNN3BP = [[0.5939435702928, 0.6220570520606509, 0.5400988950110798, 0.6263976455473157, 0.556951871657754, 0.6167068904334321, 0.6181326718075334, 0.4731601257683388, 0.39461996446919867, 0.3683883947503606, 0.5152489419148251, 0.49765778796754206, 0.504309853050475, 0.4444705605829122, 0.47154285963016995, 0.4956795667131823, 0.522369362920544, 0.5512113447740529, 0.5369652374321794, 0.3946524064171123, 0.3905749892569124, 0.3759077452345569, 0.4732620320855615, 0.5109590777069974, 0.5539147427421337, 0.5197860962566845, 0.5197860962566845, 0.5101112814332018, 0.5529411764705882, 0.5901433751832806, 0.6132870733334114, 0.5318243478962317, 0.4999836178752384, 0.5229946524064172, 0.527585157794966, 0.5272727272727272, 0.5280804342872163, 0.514769312248452, 0.4392475272978417, 0.41799407019734003, 0.5032306938382073, 0.4327575996691051, 0.5027024805049222, 0.45644926057521484, 0.5204918888796364, 0.4938582982418921, 0.5646664947441862, 0.49768329572189945, 0.4994561136153079], [0.3179394688927823, 0.3667552476784808, 0.28889490241179855, 0.3332848000169471, 0.28349410503751343, 0.36033890906204735, 0.3925686591276252, 0.3554470438338437, 0.3230630589782246, 0.3246940244780418, 0.44511613983025494, 0.47752817951929283, 0.4212047683385264, 0.3016495715950571, 0.3276262372060708, 0.3303837268039941, 0.3991392065962104, 0.3961803565872275, 0.40660026712199077, 0.2992336835347995, 0.3194698262530806, 0.33620677834403645, 0.40758875269104705, 0.40952953592828734, 0.4530732142180171, 0.3322638146167558, 0.3322638146167558, 0.3813635601195198, 0.4266809728183119, 0.446676350307007, 0.4366875300914781, 0.38905060424249543, 0.3533461807589478, 0.4421985880816807, 0.427249500174724, 0.4657138296295452, 0.44997286735480463, 0.4018476591003721, 0.362886700984557, 0.38004612566983975, 0.39043830176104005, 0.4576740607791101, 0.38987555635690985, 0.4643714844580226, 0.398588397314512, 0.47263381080827693, 0.47110392203850154, 0.442574245145694, 0.42256708031334655], [0.28712135206077066, 0.40841397204524654, 0.3810579644205272, 0.4122904259066299, 0.3533190578158458, 0.3990529851399417, 0.4952020940749138, 0.3555448704013829, 0.3651165190979262, 0.36911953526203395, 0.538745496430597, 0.5351761160509525, 0.5433119762067279, 0.4491098405042578, 0.5040910488828908, 0.4777408841430133, 0.5220695706659377, 0.45740037205497597, 0.4894329814281875, 0.3461097030629881, 0.35795232512700276, 0.3547257876312718, 0.5583815651344807, 0.5276691102394104, 0.5455217326568967, 0.47954236959472557, 0.47954236959472557, 0.5320826143068275, 0.49696362241307135, 0.4913213981244671, 0.46634063461450154, 0.46508072712585474, 0.4529969412690144, 0.4868201646380074, 0.4326338722623552, 0.5965809595499386, 0.5802827041221847, 0.44958924978363607, 0.4621867343984546, 0.47741769343528384, 0.4947845091746955, 0.4307859366448369, 0.4399591230586888, 0.42432404472130464, 0.4643553131319617, 0.5791436865920162, 0.6118520563031163, 0.5717324038402739, 0.5361008035345763], [0.27518921853543254, 0.4392614188532556, 0.35402737981534543, 0.4019929691725257, 0.33624611540063437, 0.3917999381641843, 0.4577263685447828, 0.3190222698547929, 0.27654092008340425, 0.2672240973253529, 0.5754811788521534, 0.5772639014057872, 0.5836123874522207, 0.39695233988759915, 0.45402298850574707, 0.437137584878112, 0.5451745289721446, 0.48468322415979037, 0.5181935766821212, 0.27321323419648524, 0.2593022662936913, 0.24027527873744314, 0.5916402401324318, 0.5651418009949186, 0.6005721078674044, 0.4289027540963927, 0.4289027540963927, 0.4813602863825104, 0.5460618340748136, 0.5433020435582553, 0.5161541578309076, 0.48001238533150853, 0.4427783757455698, 0.47183735446530717, 0.4482405813649264, 0.5715112518352717, 0.6006553004725044, 0.4364555022491118, 0.45132539299007246, 0.43852564940928823, 0.4478927203065134, 0.4339242939112027, 0.4386402039499939, 0.4189928011163401, 0.4509515411873151, 0.5402177776986512, 0.5693055189453097, 0.5524202970542176, 0.5522179504322913], [0.25401728252328853, 0.44344882516925527, 0.35662171121841874, 0.4016153876502809, 0.33429148012481347, 0.40483264012675774, 0.41678181133023484, 0.37326636607737357, 0.34340378489782075, 0.34474258155679793, 0.5856714906070364, 0.5768631562043361, 0.579365553952838, 0.4099029561192039, 0.44013900863780187, 0.44214065568602007, 0.555898385544811, 0.4883382333645041, 0.5101695353184227, 0.34415764640577295, 0.3571333603494711, 0.3787256666402001, 0.574616032345395, 0.5501851943950282, 0.5941188523054903, 0.4319341866871627, 0.4319341866871627, 0.47838694627758127, 0.5379275015767786, 0.5158660783333507, 0.4896596560964274, 0.4442376506591367, 0.44754944130098623, 0.4760377962265357, 0.4146948580826107, 0.5198187266458023, 0.5490199930989804, 0.4586988066596177, 0.4535184541294487, 0.4484558851443846, 0.4458521148348159, 0.4414767221582168, 0.42186279106110336, 0.38911749819736774, 0.4255748749578638, 0.49444149460637055, 0.5453319439447183, 0.5111437896464871, 0.48370037469538996]]

""" NN3-UB """
dataNN3UB = [[0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 1.0], [0.2290622763063708, 0.2271746944644141, 0.8773181169757489, 0.18305814788226848, 0.21, 0.2374461979913917, 0.9130434782608695], [0.7455716586151369, 0.31351351351351353, 0.7730912973838762, 0.27292340884573896, 0.2398286937901499, 0.3166397415185784, 0.33013333333333333], [0.6645193260654113, 0.799800299550674, 0.7536945812807881, 0.7284504235176881, 0.25889328063241107, 0.7667826951765291, 0.35826771653543305], [0.2052462034054303, 0.3409090909090909, 0.6941015089163237, 0.7343822304488663, 0.21926605504587157, 0.7228637413394919, 0.7574234810415715]]

# """ NN3-UB-P """
# dataNN3UBP = [[0.5464506664783259, 0.5415716714424672, 0.5385061687728334, 0.5091327225958971, 0.6491978609625668, 0.5560971984564478, 0.6114013737581765, 0.4704655829332115, 0.401522062707063, 0.5172550336096766, 0.42995613506249303, 0.4302107840783599, 0.4212469069923786, 0.4227594006651476, 0.4935956190118232, 0.4724870164940906, 0.4760452263684136, 0.4241355917271567, 0.3972067508522591, 0.47754010695187166, 0.5077492705920208, 0.44165506266162724, 0.41229946524064176, 0.4446144062406782, 0.47373126294480394, 0.5010695187165776, 0.5010695187165776, 0.5021062731836319, 0.40267379679144377, 0.42267774266290853, 0.46137329011572803, 0.5532293344525345, 0.6149720918803169, 0.4941176470588235, 0.49055336477141087, 0.5791443850267379, 0.577304235067831, 0.5187895017193407, 0.4402626537291724, 0.5302311902818457, 0.537212471185971, 0.44103951049538076, 0.4666525550728289, 0.4173263672156335, 0.35328656370976447, 0.4922782294682636, 0.5528242198608457, 0.508836186200605, 0.5431455192014486], [0.32304098388814456, 0.33171100693718714, 0.3483611270845314, 0.33350335669239906, 0.282422293676313, 0.37940750441494536, 0.39256865912762523, 0.4371376920357288, 0.41659279746993283, 0.42511452586977755, 0.417938377223078, 0.4210215624177349, 0.42671253021571487, 0.3906867934733948, 0.4333874156557361, 0.4535749569235289, 0.40778324892942175, 0.35862189654327337, 0.39881745356210985, 0.42279519232422585, 0.42532404303650445, 0.433505496263455, 0.42226100966702473, 0.41913391274954964, 0.46095513588589193, 0.4655971479500891, 0.4655971479500891, 0.4670669612015659, 0.42274678111587993, 0.38042610062342885, 0.4109160419102643, 0.40637960466989664, 0.38587406179984, 0.4475536250807451, 0.42435767439462424, 0.48459516778217393, 0.48790915758849734, 0.39598804780264374, 0.32223166241857826, 0.37758043728943863, 0.38431165071447054, 0.4091654889977474, 0.5063690971074448, 0.38659624501189416, 0.35824180868766853, 0.42934822677995194, 0.47782370796389495, 0.44858004291385767, 0.47038125045757373], [0.32986013714906004, 0.37838438230302385, 0.3102084839201593, 0.36756627320618646, 0.331192005710207, 0.41828488785010526, 0.4726776676224298, 0.3998779573405215, 0.3733145094107326, 0.37422437989863655, 0.495348367719248, 0.4741371078791046, 0.48194197750148016, 0.37441909190388534, 0.4132050837636854, 0.38195270895060585, 0.5378964041384423, 0.4767326531863179, 0.5006818624586012, 0.3694691880841121, 0.38335287221570924, 0.403276363053973, 0.47894968464907967, 0.471496658071963, 0.4921266137159543, 0.38704673259647077, 0.38704673259647077, 0.4459833998747365, 0.5043855428727748, 0.5033150651564975, 0.4943288790926207, 0.4592235939458345, 0.4590026142563538, 0.54847750047743, 0.43586744639376224, 0.6064607186720018, 0.5934998828307134, 0.4696702437464887, 0.4349675086915163, 0.46071091450568413, 0.44717295059356865, 0.45798534620433784, 0.4864819737574188, 0.4529239053059133, 0.44414993372408496, 0.5564551571310964, 0.593089261766705, 0.5793236714975845, 0.566629541135404], [0.275830592192806, 0.38797005228437625, 0.36930913721744657, 0.37193888588426177, 0.3217649697241534, 0.41368236048623586, 0.46495466170657984, 0.31825246083978664, 0.2775179596535069, 0.26771792448584675, 0.5004043856221292, 0.49306719879858874, 0.4925696906537822, 0.4193854702069175, 0.47596233036129915, 0.4623664927192979, 0.5538834153171664, 0.48851234045014114, 0.5050626179132962, 0.27274119764197446, 0.26035177019103073, 0.23923353617467633, 0.4879580918891635, 0.4875926043196157, 0.5085140890139261, 0.4526422943193785, 0.4526422943193785, 0.505950062785568, 0.5109960552268245, 0.4989557958949105, 0.4732504036717771, 0.46678494915296465, 0.4490471455472768, 0.5544240864122755, 0.4801041236526444, 0.6036275031067673, 0.6012540513320452, 0.43025055341542, 0.42433417015505953, 0.43836450373359737, 0.4903119868637109, 0.4765454769730297, 0.5126316205734835, 0.48601488374799623, 0.4752624237091256, 0.5505302992804848, 0.5851208386304598, 0.5723344274015338, 0.5620947393157558], [0.28593864584543033, 0.46156909597769813, 0.3571869654257086, 0.3679861849491419, 0.3254519400352734, 0.40701128936423053, 0.451605990970688, 0.4020126588985012, 0.3736023924783386, 0.37197873789191294, 0.5267943432056764, 0.5380903135189339, 0.5339786447887659, 0.450496773612229, 0.45131422105340685, 0.45919100850050465, 0.5287969796969957, 0.46883741399356255, 0.49276729366016564, 0.3715422333240818, 0.3902771237187129, 0.41965077787351507, 0.5453186472346355, 0.5184395590652473, 0.5367639865346802, 0.4495452112532302, 0.4495452112532302, 0.48788601233479156, 0.4870334554571857, 0.4777572233274975, 0.4919961523439431, 0.4375672945846638, 0.4471816931980273, 0.5107132248108267, 0.44922551296198554, 0.5378751000381591, 0.5516422697572014, 0.43248286309114614, 0.4363623283975781, 0.43193428930378813, 0.4335719760183466, 0.4463899455623766, 0.45132051883106733, 0.4341226935543629, 0.44157411878319647, 0.48667049556376596, 0.5311758184561379, 0.492542851796819, 0.526745691074604]]

""" NN4-UB """
dataNN4UB = [[0.0, 1.0, 0.0, 0.0, 1.0, 1.0, 1.0], [0.21106821106821108, 0.8085106382978723, 0.17884615384615385, 0.15741935483870967, 0.7961414790996785, 0.8147909967845659, 0.8129820051413882], [0.6484375, 0.2654377880184332, 0.2920475319926874, 0.19511070110701106, 0.6359044995408631, 0.7318640955004592, 0.7165137614678899], [0.5715484683172471, 0.6457719814892722, 0.6370463078848561, 0.6128896377422073, 0.6274098910310143, 0.659538784067086, 0.669179229480737], [0.5316602316602317, 0.6024003097173829, 0.612432847275518, 0.1996124031007752, 0.6067848882035466, 0.6687234863092942, 0.5828197226502311]]


# Define data matrices and labels
data_sets = [dataNN3B, dataNN3UB, dataNN4UB]
labels = ['NN3-B', 'NN3-UB', 'NN4-UB']
# labels = ['SVM3', 'SVM4', 'NN3-B', 'NN3-UB', 'NN4-UB']
 
# Plot confidence intervals
plot_confidence_intervals(data_sets, labels, 'Konfidensintervaler for forskellige modeller')
