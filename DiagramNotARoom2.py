import numpy as np
import matplotlib.pyplot as plt
from matplotlib.lines import Line2D


def plot_confidence_intervals(data_sets, labels, title):
    fig, ax = plt.subplots()
    x = np.arange(len(data_sets[0]))
    width = 0.10

    confidence_level = 0.95
    z_score = {2: 4.303, 3: 3.182, 4: 2.776, 5: 2.571, 6: 2.447, 7: 2.365, 8: 2.306, 9: 2.262, 10: 2.228, 11: 2.201, 12: 2.179, 13: 2.160, 14: 2.145, 15: 2.131, 16: 2.120, 17: 2.567, 34: 2.042, 47: 2.014, 48: 2.014, 49: 2.014, 50: 2.009}
    
    # colors = ['blue', 'orange', 'green', 'red', 'purple', 'brown', 'teal']
    # colors = ['red', 'green', 'blue', 'orange', 'purple', 'teal', 'brown']
    # colors = ['blue', 'orange', 'green', 'red', 'purple', 'pink', 'gray']
    # colors = ['red', 'green', 'blue', 'orange', 'magenta', 'brown', 'gray']
    # colors = ['red', 'green', 'blue', 'orange', 'purple', 'brown', 'darkgray']
    # group1 = ['red', 'orange', 'yellow', 'palegreen', 'lightblue']
    # group2 = ['maroon', 'navy', 'teal', 'sienna', 'olive']
    # group1 = ['red', 'orange', 'yellow']
    group1 = ['red', 'orange', 'green']
    group2 = ['navy', 'teal', 'lightblue']
    colors = group1 + group2
    # colors = ["#B7F0B1", "#2EBD4F", "#B4E1E7", "#2471A3", "#BDADEA", "#6A5ACD", "#FFC0CB", 'blue', 'brown', 'orange']
    # colors = ["#ADD8E6", "#FF69B4", "#A9A9A9"]


    for j, data_set in enumerate(data_sets):
        for i, data in enumerate(data_set):
            mean = np.mean(data)
            std = np.sqrt(np.sum((data-mean)**2)/(len(data)-1))
            margin_of_error = z_score[len(data)-1] * (std / np.sqrt(len(data)))
            lower_bound = mean - margin_of_error
            upper_bound = mean + margin_of_error

            # Plot data points
            ax.plot(x[i]+j*width, mean, marker='o', color=colors[j], label=labels[j] if i == 0 else "")

            # Plot error bars
            ax.errorbar(x[i]+j*width, mean, yerr=margin_of_error, fmt='none', ecolor=colors[j], capsize=3)

    # Set axis labels and title
    ax.set_xticks(x+width)
    # ax.set_xticklabels(['Formiddag: Eget dataset', 'Aften: Eget dataset', 'Formiddag: Anden dag', 'Formiddag: Andet tidspunkt', 'Aften: Anden dag', 'Aften: Andet tidspunkt'], rotation=45)
    # ax.set_xticklabels(['45 minutter', 'Formiddag: Andet tidspunkt', 'Aften: Anden dag', 'Aften: Andet tidspunkt'], rotation=45)
    ax.set_xticklabels(['Inden for trænet område', 'Uden for trænet område'], rotation=45)
    fig.subplots_adjust(bottom=0.35)
    fig.subplots_adjust(right=0.7)
    # ax.set_xlabel('Data set')
    ax.set_ylabel('Nøjagtighed')
    ax.set_title(title)

    # Add legend
    handles = [Line2D([0], [0], color=color, linewidth=2) for color in colors]
    ax.legend(handles=handles, labels=labels, loc='center left', bbox_to_anchor=(1, 0.5))

    # Show plot
    plt.show()


# """ Identity-NN3-B """
# IdataNN3B = [[0.34735899731423453, 0.34057971014492755, 0.34012400354295835, 0.337251356238698, 0.32562277580071175, 0.3396396396396396, 0.3480565371024735, 0.3311546840958606, 0.3342776203966006, 0.33116413593637023, 0.3428775948460988, 0.3342776203966006, 0.33116413593637023, 0.3428775948460988, 0.3311546840958606, 0.33116413593637023, 0.3428775948460988, 0.3311546840958606, 0.3342776203966006, 0.34661921708185056, 0.3371757925072046, 0.3321554770318021, 0.34661921708185056, 0.3371757925072046, 0.3321554770318021, 0.34661921708185056, 0.34661921708185056, 0.3321554770318021, 0.34661921708185056, 0.3371757925072046, 0.3321554770318021, 0.3242074927953891, 0.3399293286219081, 0.34661921708185056, 0.3321554770318021, 0.3209964412811388, 0.3242074927953891, 0.33357193987115247, 0.3384168482207698, 0.34490084985835695, 0.3586406362979031, 0.3428775948460988, 0.3311546840958606, 0.3342776203966006, 0.33116413593637023, 0.33357193987115247, 0.3384168482207698, 0.34490084985835695, 0.3586406362979031],[1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 1.0, 1.0, 0.0, 1.0, 0.0, 0.0, 0.0, 1.0, 1.0, 0.0, 1.0, 0.0, 0.0, 0.0, 1.0, 1.0, 1.0, 1.0, 0.0, 0.0, 0.0]]

""" Identity-NN3-B-P """
IdataNN3BP = [[0.2605192479856759, 0.2524512676276417, 0.25509300265721874, 0.2515712819510288, 0.2446524064171123, 0.2522256841291694, 0.26336898395721925, 0.24546506233520662, 0.2507082152974504, 0.24703054464442753, 0.25715819613457414, 0.2507082152974504, 0.24703054464442753, 0.25715819613457414, 0.24546506233520662, 0.24703054464442753, 0.25715819613457414, 0.24546506233520662, 0.2507082152974504, 0.260427807486631, 0.25039596387264257, 0.2513368983957219, 0.260427807486631, 0.25039596387264257, 0.2513368983957219, 0.260427807486631, 0.260427807486631, 0.2513368983957219, 0.260427807486631, 0.25039596387264257, 0.2513368983957219, 0.24076534987754095, 0.2572192513368984, 0.260427807486631, 0.2513368983957219, 0.2411764705882353, 0.24076534987754095, 0.25017895490336434, 0.25084806808817167, 0.2586756373937677, 0.2675265286978953, 0.25715819613457414, 0.24546506233520662, 0.2507082152974504, 0.24703054464442753, 0.25017895490336434, 0.25084806808817167, 0.2586756373937677, 0.2675265286978953],[1.0, 0.0, 0.0, 1.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0]]

# """ Identity-NN3-UB """
# IdataNN3UB = [[0.3294642857142857, 0.34877384196185285, 0.3489813994685562, 0.31374321880650996, 0.3612099644128114, 0.3381294964028777, 0.338339222614841, 0.33042846768336964, 0.32082152974504247, 0.31019522776572667, 0.33357193987115247, 0.34490084985835695, 0.3586406362979031, 0.33357193987115247, 0.3384168482207698, 0.3586406362979031, 0.3235504652827487, 0.33042846768336964, 0.32082152974504247, 0.3323843416370107, 0.33861671469740634, 0.32791519434628974, 0.3209964412811388, 0.3242074927953891, 0.3399293286219081, 0.3209964412811388, 0.3209964412811388, 0.3399293286219081, 0.3323843416370107, 0.33861671469740634, 0.32791519434628974, 0.3371757925072046, 0.3321554770318021, 0.3323843416370107, 0.32791519434628974, 0.34661921708185056, 0.3371757925072046, 0.3428775948460988, 0.3311546840958606, 0.3342776203966006, 0.33116413593637023, 0.3235504652827487, 0.33042846768336964, 0.32082152974504247, 0.31019522776572667, 0.3428775948460988, 0.3311546840958606, 0.3342776203966006, 0.33116413593637023],[1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0]]

""" Identity-NN3-UB-P """
IdataNN3UBP = [[0.2470982142857143, 0.2585250850121551, 0.26173604960141716, 0.23403548213674796, 0.2713903743315508, 0.2511042104654079, 0.2560160427807487, 0.24492676175991013, 0.24061614730878186, 0.23138887260362315, 0.25017895490336434, 0.2586756373937677, 0.2675265286978953, 0.25017895490336434, 0.25084806808817167, 0.2675265286978953, 0.24266284896206156, 0.24492676175991013, 0.24061614730878186, 0.24973262032085564, 0.2514660320943205, 0.2481283422459893, 0.2411764705882353, 0.24076534987754095, 0.2572192513368984, 0.2411764705882353, 0.2411764705882353, 0.2572192513368984, 0.24973262032085564, 0.2514660320943205, 0.2481283422459893, 0.25039596387264257, 0.2513368983957219, 0.24973262032085564, 0.2481283422459893, 0.260427807486631, 0.25039596387264257, 0.25715819613457414, 0.24546506233520662, 0.2507082152974504, 0.24703054464442753, 0.24266284896206156, 0.24492676175991013, 0.24061614730878186, 0.23138887260362315, 0.25715819613457414, 0.24546506233520662, 0.2507082152974504, 0.24703054464442753],[1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0]]

""" Identity-NN4-UB """
IdataNN4UB = [[0.2587131367292225, 0.26411290322580644, 0.26542800265428, 0.25691166554281863, 0.2540106951871658, 0.2581939799331104, 0.250501002004008, 0.2588805166846071, 0.2505307855626327, 0.2540453074433657, 0.2497320471596999, 0.25849256900212314, 0.267529665587918, 0.2497320471596999, 0.25080731969860065, 0.267529665587918, 0.25133976420150056, 0.2588805166846071, 0.2505307855626327, 0.24866310160427807, 0.25735687533440343, 0.24412393162393162, 0.2411764705882353, 0.24077046548956663, 0.2569444444444444, 0.2411764705882353, 0.2411764705882353, 0.2569444444444444, 0.24866310160427807, 0.25735687533440343, 0.24412393162393162, 0.25147137506688066, 0.24786324786324787, 0.2497326203208556, 0.24786324786324787, 0.2497326203208556, 0.25147137506688066, 0.2422293676312969, 0.2448869752421959, 0.24044585987261147, 0.2313915857605178, 0.2422293676312969, 0.2448869752421959, 0.24044585987261147, 0.2313915857605178, 0.2422293676312969, 0.2448869752421959, 0.24044585987261147, 0.2313915857605178],[1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0]]

# """ Sigmoid-NN3-B """
# SdataNN3B = [[0.7663384064458371, 0.8174386920980926, 0.7067137809187279, 0.8231046931407943, 0.7313167259786477, 0.7900900900900901, 0.8021201413427562, 0.6252723311546841, 0.5106232294617564, 0.4924078091106291, 0.6607015032211883, 0.6444759206798867, 0.6536514822848879, 0.5826771653543307, 0.6180101670297748, 0.6536514822848879, 0.6964924838940587, 0.7254901960784313, 0.6975920679886686, 0.5231316725978647, 0.5244956772334294, 0.488339222614841, 0.6170818505338078, 0.6635446685878963, 0.7031802120141343, 0.6562277580071174, 0.6562277580071174, 0.6593639575971731, 0.7238434163701067, 0.7824207492795389, 0.7858657243816255, 0.7089337175792507, 0.6558303886925795, 0.6761565836298933, 0.6303886925795052, 0.6903914590747331, 0.6822766570605188, 0.670722977809592, 0.5802469135802469, 0.5432011331444759, 0.6644974692697035, 0.4853256979241231, 0.5272331154684096, 0.4440509915014164, 0.6464208242950108, 0.6478167501789549, 0.738562091503268, 0.6565155807365439, 0.6305133767172812],[1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 1.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0]]

""" Sigmoid-NN3-B-P """
SdataNN3BP = [[0.5939435702928, 0.6220570520606509, 0.5400988950110798, 0.6263976455473157, 0.556951871657754, 0.6167068904334321, 0.6181326718075334, 0.4731601257683388, 0.39461996446919867, 0.3683883947503606, 0.5152489419148251, 0.49765778796754206, 0.504309853050475, 0.4444705605829122, 0.47154285963016995, 0.4956795667131823, 0.522369362920544, 0.5512113447740529, 0.5369652374321794, 0.3946524064171123, 0.3905749892569124, 0.3759077452345569, 0.4732620320855615, 0.5109590777069974, 0.5539147427421337, 0.5197860962566845, 0.5197860962566845, 0.5101112814332018, 0.5529411764705882, 0.5901433751832806, 0.6132870733334114, 0.5318243478962317, 0.4999836178752384, 0.5229946524064172, 0.527585157794966, 0.5272727272727272, 0.5280804342872163, 0.514769312248452, 0.4392475272978417, 0.41799407019734003, 0.5032306938382073, 0.4327575996691051, 0.5027024805049222, 0.45644926057521484, 0.5204918888796364, 0.4938582982418921, 0.5646664947441862, 0.49768329572189945, 0.4994561136153079],[1.0, 1.0, 1.0, 1.0, 1.0, 0.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 0.0, 0.0, 1.0, 1.0, 1.0, 1.0, 1.0, 0.0, 0.0, 1.0, 1.0, 1.0, 1.0, 1.0, 0.0, 0.0, 1.0, 1.0, 1.0, 1.0, 1.0, 0.0, 0.0]]

# """ Sigmoid-NN3-UB """
# SdataNN3UB = [[0.7108325872873769, 0.7219202898550725, 0.6996466431095406, 0.6543321299638989, 0.8362989323843416, 0.7315315315315315, 0.7791519434628975, 0.6151053013798112, 0.5184135977337111, 0.660882140274765, 0.5597709377236937, 0.5594900849858357, 0.5502530730296457, 0.5096635647816751, 0.6100217864923747, 0.6146059291395517, 0.506084466714388, 0.4749455337690632, 0.48158640226628896, 0.6206405693950178, 0.6527377521613833, 0.5667844522968198, 0.5387900355871886, 0.5814121037463977, 0.6063604240282685, 0.6441281138790036, 0.6441281138790036, 0.6537102473498233, 0.5209964412811388, 0.5561959654178674, 0.5724381625441696, 0.6786743515850144, 0.6515901060070671, 0.6405693950177936, 0.5413427561837456, 0.7224199288256228, 0.7377521613832853, 0.6249105225483178, 0.4495279593318809, 0.5191218130311614, 0.6637744034707158, 0.5390121689334287, 0.5134350036310821, 0.4780453257790368, 0.4584237165582068, 0.651395848246242, 0.7233115468409586, 0.6706798866855525, 0.6717281272595806],[1.0, 0.0, 1.0, 1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 0.0, 0.0]]

""" Sigmoid-NN3-UB-P """
SdataNN3UBP = [[0.5464506664783259, 0.5415716714424672, 0.5385061687728334, 0.5091327225958971, 0.6491978609625668, 0.5560971984564478, 0.6114013737581765, 0.4704655829332115, 0.401522062707063, 0.5172550336096766, 0.42995613506249303, 0.4302107840783599, 0.4212469069923786, 0.4227594006651476, 0.4935956190118232, 0.4724870164940906, 0.4760452263684136, 0.4241355917271567, 0.3972067508522591, 0.47754010695187166, 0.5077492705920208, 0.44165506266162724, 0.41229946524064176, 0.4446144062406782, 0.47373126294480394, 0.5010695187165776, 0.5010695187165776, 0.5021062731836319, 0.40267379679144377, 0.42267774266290853, 0.46137329011572803, 0.5532293344525345, 0.6149720918803169, 0.4941176470588235, 0.49055336477141087, 0.5791443850267379, 0.577304235067831, 0.5187895017193407, 0.4402626537291724, 0.5302311902818457, 0.537212471185971, 0.44103951049538076, 0.4666525550728289, 0.4173263672156335, 0.35328656370976447, 0.4922782294682636, 0.5528242198608457, 0.508836186200605, 0.5431455192014486],[0.0, 1.0, 1.0, 1.0, 1.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 1.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 1.0, 1.0, 0.0]]

""" Sigmoid-NN4-UB """
SdataNN4UB = [[0.6689008042895442, 0.7267833109017496, 0.544127405441274, 0.5084288604180714, 0.642379679144385, 0.6709030100334448, 0.6392785571142284, 0.5446716899892358, 0.5015923566878981, 0.49460625674217906, 0.5310825294748124, 0.5159235668789809, 0.580906148867314, 0.47266881028938906, 0.5597416576964478, 0.49730312837108953, 0.40514469453376206, 0.46932185145317545, 0.3970276008492569, 0.5224598930481283, 0.4943820224719101, 0.42467948717948717, 0.5181818181818182, 0.48796147672552165, 0.5283119658119658, 0.5684491978609626, 0.5684491978609626, 0.47863247863247865, 0.4737967914438503, 0.4483681112894596, 0.43856837606837606, 0.5591225254146602, 0.5416666666666666, 0.4475935828877005, 0.6041666666666666, 0.49411764705882355, 0.4751203852327448, 0.5680600214362272, 0.6076426264800862, 0.6125265392781316, 0.5943905070118662, 0.3912111468381565, 0.5182992465016146, 0.40498938428874737, 0.5080906148867314, 0.48767416934619506, 0.5430570505920345, 0.4888535031847134, 0.5048543689320388],[0.0, 1.0, 1.0, 1.0, 1.0, 1.0, 0.0, 0.0, 0.0, 0.0, 1.0, 1.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 1.0, 1.0, 0.0]]

# Define data matrices and labels
data_sets = [IdataNN3BP, IdataNN3UBP, IdataNN4UB, SdataNN3BP, SdataNN3UBP, SdataNN4UB]
# data_sets = [IdataNN3B, IdataNN3BP, IdataNN3UB, IdataNN3UBP, IdataNN4UB, SdataNN3B, SdataNN3BP, SdataNN3UB, SdataNN3UBP, SdataNN4UB]
# labels = ['Identity-NN3-B', 'Identity-NN3-UB', 'Identity-NN4-UB', 'Sigmoid-NN3-B', 'Sigmoid-NN3-UB', 'Sigmoid-NN4-UB']
# labels = ['Identity-NN3-B', 'Identity-NN3-B-P', 'Identity-NN3-UB', 'Identity-NN3-UB-P', 'Identity-NN4-UB', 'Sigmoid-NN3-B', 'Sigmoid-NN3-B-P', 'Sigmoid-NN3-UB', 'Sigmoid-NN3-UB-P', 'Sigmoid-NN4-UB']
labels = ['Identity-NN3-B-P', 'Identity-NN3-UB-P', 'Identity-NN4-UB', 'Sigmoid-NN3-B-P', 'Sigmoid-NN3-UB-P', 'Sigmoid-NN4-UB']
# labels = ['SVM3', 'SVM4', 'NN3-B', 'NN3-UB', 'NN4-UB']
 
# Plot confidence intervals
plot_confidence_intervals(data_sets, labels, 'Konfidensintervaler for aktiveringsfunktioner')
